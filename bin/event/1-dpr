#!/usr/bin/env bash

set -e

p() { printf "%-66s %-66s\n" "$1" "$2"; }

locs=(
2,62
14,59
-6,59
-8,58
-19,62
  )

addrs=(
0xB8aea9B7A57b82243B74B043905362F4402f2995
0x12aC25Cc6D2cCe3a89aBC344C8350aCA491a1e42
0xEa69387AB586Ab01d363bfE44405E0437f229e6C
0x9B6F13184B49d2237B190cb8Bd28373F8DE7258A
0xCac0864330aC97bF8924005dbC2884638C839734
  )

export SETH_ASYNC=yes
chain=crab
from=0x7aE77149ed38c5dD313e9069d790Ce7085caf0A6
nonce=$(seth nonce $from --chain $chain)
# echo "nonce: ${nonce}"
# # claim land from genesis holder
# for loc in "${locs[@]}"; do
#   locarray=(`echo $loc | tr ',' ' '`)
#   x="${locarray[0]}"
#   y="${locarray[1]}"
#   echo $x $y
#   unset ETH_NONCE
#   landId=$(evo lnd-bas loc $(seth --to-int256 $x) $(seth --to-int256 $y) --chain $chain)
#   echo $landId
#   export ETH_NONCE=$nonce
#   evo mkt-gen claim $landId --chain $chain
#   nonce=$(( ${nonce} + 1 ))
#   # evo cmn-tkn owner $landId --chain $chain
#   # evo lnd-mst unbox $landId --chain $chain
# done
# echo "nonce: ${nonce}"

echo "------------------------------------------------------------------"

echo "nonce: ${nonce}"
for (( i=0; i<${#locs[@]}; i++ ));
do
  loc="${locs[$i]}"
  to="${addrs[$i]}"
  locarray=(`echo $loc | tr ',' ' '`)
  x="${locarray[0]}"
  y="${locarray[1]}"
  echo $x $y
  unset ETH_NONCE
  landId=$(evo lnd-bas loc $(seth --to-int256 $x) $(seth --to-int256 $y) --chain $chain)
  p "$landId" "$to"
  export ETH_NONCE=$nonce
  evo cmn-tkn transferFrom "$from" "$to" "$landId" --chain $chain
  nonce=$(( ${nonce} + 1 ))
done
echo "nonce: ${nonce}"
